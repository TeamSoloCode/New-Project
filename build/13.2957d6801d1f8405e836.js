(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{907:function(e,a,t){"use strict";t.r(a);var n,s=t(21),r=t(0),c=t(610),l=t.n(c),i=t(28),m=t(27),u=t(29),E=t(40),d=(t(609),t(25)),o=t(329),b=t(905);!function(e){e[e.FETCH_EVENT=0]="FETCH_EVENT",e[e.FETCH_EVENT_SUCCESSED=1]="FETCH_EVENT_SUCCESSED",e[e.FETCH_EVENT_FAILED=2]="FETCH_EVENT_FAILED",e[e.UPDATE_EVENT=3]="UPDATE_EVENT",e[e.UPDATE_EVENT_SUCCESSFUL=4]="UPDATE_EVENT_SUCCESSFUL",e[e.UPDATE_EVENT_FAILED=5]="UPDATE_EVENT_FAILED"}(n||(n={}));var h={event:null,results:null,updating:!1,fetching:!1,error:!1,message:""};function v(e,a){switch(void 0===e&&(e=h),a.type){case n.FETCH_EVENT:return Object(s.a)(Object(s.a)({},e),{updating:!0});case n.FETCH_EVENT_SUCCESSED:return Object(s.a)(Object(s.a)({},e),{event:a.event,fetching:!1,message:a.message,error:!1});case n.FETCH_EVENT_FAILED:return Object(s.a)(Object(s.a)({},e),{message:a.message,error:!0});case n.UPDATE_EVENT:return Object(s.a)(Object(s.a)({},e),{updating:!0});case n.UPDATE_EVENT_SUCCESSFUL:return Object(s.a)(Object(s.a)({},e),{results:a.results,updating:!1,message:a.message,error:!1});case n.UPDATE_EVENT_FAILED:return Object(s.a)(Object(s.a)({},e),{message:a.message,error:!0});default:return e}}a.default=Object(d.f)(r.memo((function(e){var a=r.useReducer(v,h),t=a[0],c=a[1],d=r.useState(null),T=d[0],p=d[1],g=r.useState(new Date),f=g[0],N=g[1],w=r.useState(new Date),y=w[0],C=w[1],S=r.useState(""),_=S[0],D=S[1],U=r.useState(""),F=U[0],j=U[1],P=r.useState(""),O=P[0],k=P[1],V=r.useState(""),A=V[0],I=V[1],L=r.useState(""),x=L[0],H=L[1],M=r.useState(""),q=M[0],R=M[1],J=r.useState(void 0),B=J[0],z=J[1],G=r.useState(void 0),K=G[0],Q=G[1],W=r.useState(""),X=W[0],Y=W[1],Z=r.useState(!1),$=Z[0],ee=Z[1],ae=r.createRef(),te=r.useCallback((function(e){k(e.target.value)}),[]),ne=r.useCallback((function(e){Y(e.target.value)}),[]),se=r.useCallback((function(e){return Object(s.b)(void 0,void 0,void 0,(function(){var a,t,n,r;return Object(s.c)(this,(function(s){switch(s.label){case 0:return e.preventDefault(),ae.current&&ae.current.files?(a=ae.current.files[0])?((t=new FormData).append("image",a),[4,fetch(E.r,{method:"POST",body:t})]):[2]:[3,3];case 1:return(n=s.sent())?[4,n.json()]:[3,3];case 2:r=s.sent().imageInfo,Y(r.filename),s.label=3;case 3:return[2]}}))}))}),[ae]),re=r.useCallback((function(e){I(e.target.value)}),[]),ce=r.useCallback((function(e){H(e.currentTarget.value)}),[]),le=r.useCallback((function(e){R(e.currentTarget.value)}),[]),ie=r.useCallback((function(e){z(1!=B?1:0)}),[B]),me=r.useCallback((function(e){Q(e.currentTarget.value)}),[]),ue=r.useCallback((function(){return Object(s.b)(void 0,void 0,void 0,(function(){var a,t,r,l;return Object(s.c)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,5,6]),c({type:n.UPDATE_EVENT}),a=e.match.params,t={},O&&(t.eventName=O),A&&(t.location=A),_&&(t.beginDatetime=_),F&&(t.endDatetime=F),x&&(t.descriptions=x),q&&(t.detailLink=q),K&&(t.sequence=K),null!=B&&(t.show=B),X&&(t.imageURI=X),[4,fetch(E.q,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(s.a)(Object(s.a)({},t),{eventId:a.eventId}))})];case 1:return(r=i.sent())?[4,r.json()]:[3,3];case 2:if(0!=(l=i.sent()).code)throw c({type:n.UPDATE_EVENT_FAILED,message:l.message.sqlMessage}),Error(l.message.sqlMessage);c({type:n.UPDATE_EVENT_SUCCESSFUL,results:l.data,message:"Update event successfull !!!"}),i.label=3;case 3:return[3,6];case 4:return i.sent(),[3,6];case 5:return ee(!0),[7];case 6:return[2]}}))}))}),[T,O,A,_,F,x,q,B,K,X]);r.useEffect((function(){try{if(!t.event)return;p(t.event)}catch(e){}}),[t.event]),r.useEffect((function(){if(t.event){var e=Object(s.a)({},t.event),a=e.eventName,n=e.imageURI,r=e.beginDatetime,c=e.endDatetime,l=e.descriptions,i=e.detailLink,m=e.sequence,u=e.location,E=e.show;a&&k(a),n&&Y(n||""),r&&D(r),c&&j(c),l&&H(l||""),i&&R(i),m&&Q(m),u&&I(u),null!=E&&z(E)}}),[t.event]),r.useEffect((function(){var a,t=e.match.params;a=t.eventId,Object(s.b)(void 0,void 0,void 0,(function(){var e,t,r,l,i;return Object(s.c)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,5,6]),c({type:n.FETCH_EVENT}),e=new URL(E.i),t={eventId:a},Object.keys(t).forEach((function(a){return e.searchParams.append(a,t[a])})),[4,fetch(e.href)];case 1:return(r=s.sent())?[4,r.json()]:[3,3];case 2:if(0!=(l=s.sent()).code)throw c({type:n.FETCH_EVENT_FAILED,message:l.message.sqlMessage}),Error(l.message.sqlMessage);c({type:n.FETCH_EVENT_SUCCESSED,event:l.data,message:"Fetch event successfull !!!"}),s.label=3;case 3:return[3,6];case 4:return i=s.sent(),alert(i.message),[3,6];case 5:return ee(!0),[7];case 6:return[2]}}))}))}),[]);var Ee;return r.createElement(r.Fragment,null,r.createElement("h1",null,"Update Event"),r.createElement(o.a,{className:"ml-2",onClose:function(){return ee(!1)},show:$,delay:3e3,autohide:!0},r.createElement(o.a.Header,null,r.createElement(u.a,{className:"mr-1",variant:"success",style:{width:16,height:16,borderRadius:8}}),r.createElement("strong",{className:"mr-auto"},"Message")),r.createElement(o.a.Body,null,t.message)),r.createElement("div",{className:"m-4"},r.createElement(i.a,{className:"mb-3"},r.createElement(i.a.Prepend,{style:{width:"10%"}}),r.createElement(b.a,{style:{width:"90%"}},r.createElement(u.a,{variant:0!=B?"success":"secondary",onClick:ie},"Show on client"),r.createElement(u.a,{variant:0==B?"success":"secondary",onClick:ie},"Hidden on client"))),r.createElement(i.a,{className:"mb-3"},r.createElement(i.a.Prepend,{style:{width:"10%"}},r.createElement(i.a.Text,{className:"w-100",id:"basic-addon1"},"Event name")),r.createElement(m.a,{value:O,onChange:te,style:{width:"90%"},"aria-describedby":"basic-addon1"})),r.createElement(i.a,{className:"mb-3"},r.createElement(i.a.Prepend,{style:{width:"10%"}},r.createElement(i.a.Text,{className:"w-100",id:"basic-addon1"},"Event image")),r.createElement(m.a,{value:X,onChange:ne,style:{width:"90%"},"aria-describedby":"basic-addon1"}),r.createElement("div",{className:"w-100 text-right"},X?r.createElement("img",{className:"mt-1 mb-1",src:(Ee=X,Ee.includes("https")||Ee.includes("http")?Ee:E.j+Ee),width:200,height:200}):null),r.createElement("form",{className:"w-100 text-right",method:"post",encType:"multipart/form-data",onSubmit:se},r.createElement("input",{ref:ae,type:"file",name:"image"}),r.createElement(u.a,{variant:"outline-dark",type:"submit",name:"upload"},"Save image"))),r.createElement(i.a,{className:"mb-3"},r.createElement(i.a.Prepend,{style:{width:"10%"}},r.createElement(i.a.Text,{className:"w-100",id:"basic-addon1"},"Location")),r.createElement(m.a,{value:A,onChange:re,style:{width:"90%"},"aria-describedby":"basic-addon1"})),r.createElement(i.a,{className:"mb-3"},r.createElement(i.a.Prepend,{style:{width:"10%"}},r.createElement(i.a.Text,{className:"w-100",id:"basic-addon1"},"Link to detail")),r.createElement(m.a,{as:"textarea",value:q,onChange:le,style:{width:"90%"},placeholder:"https://example.com/users/","aria-label":"linkToDetail","aria-describedby":"basic-addon1"})),r.createElement(i.a,{className:"mb-3"},r.createElement(i.a.Prepend,{style:{width:"10%"}},r.createElement(i.a.Text,{className:"w-100"},"Start Time")),r.createElement(m.a,{value:_,"aria-describedby":"basic-addon2"}),r.createElement(i.a.Append,null,r.createElement(l.a,{className:"h-100",id:"basic-addon2",selected:_?new Date(_):f,withPortal:!0,onChange:function(e){return N(e)},timeInputLabel:"Time:",customInput:r.createElement((function(e){var a=e.value,t=e.onClick;return D(a),r.createElement(i.a.Prepend,{onClick:t},r.createElement(i.a.Text,{className:"w-100"},"Calendar"))}),null),dateFormat:"MM/dd/yyyy h:mm aa",showTimeInput:!0}))),r.createElement(i.a,{className:"mb-3"},r.createElement(i.a.Prepend,{style:{width:"10%"}},r.createElement(i.a.Text,{className:"w-100"},"End Time")),r.createElement(m.a,{value:F,"aria-describedby":"basic-addon2"}),r.createElement(i.a.Append,null,r.createElement(l.a,{className:"h-100",id:"basic-addon2",selected:F?new Date(F):y,withPortal:!0,onChange:function(e){return C(e)},timeInputLabel:"Time:",customInput:r.createElement((function(e){var a=e.value,t=e.onClick;return j(a),r.createElement(i.a.Prepend,{onClick:t},r.createElement(i.a.Text,{className:"w-100"},"Calendar"))}),null),dateFormat:"MM/dd/yyyy h:mm aa",showTimeInput:!0}))),r.createElement(i.a,{className:"mb-3"},r.createElement(i.a.Prepend,{style:{width:"10%"}},r.createElement(i.a.Text,{className:"w-100"},"Description")),r.createElement(m.a,{value:x,onChange:ce,style:{width:"90%"},as:"textarea",placeholder:"Event description","aria-label":"eventDescription"})),r.createElement(i.a,{className:"mb-3"},r.createElement(i.a.Prepend,{style:{width:"10%"}},r.createElement(i.a.Text,{className:"w-100",id:"basic-addon1"},"Sequence")),r.createElement(m.a,{value:K,onChange:me,style:{width:"90%"},"aria-describedby":"basic-addon1"}))),r.createElement(o.a,{className:"ml-2",onClose:function(){return ee(!1)},show:$,delay:3e3,autohide:!0},r.createElement(o.a.Header,null,r.createElement(u.a,{className:"mr-1",variant:"success",style:{width:16,height:16,borderRadius:8}}),r.createElement("strong",{className:"mr-auto"},"Message")),r.createElement(o.a.Body,null,t.message)),r.createElement("div",{className:"text-center mb-2"},r.createElement(u.a,{variant:"primary",onClick:ue},"Submit")))})))}}]);